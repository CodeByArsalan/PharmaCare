-- =====================================================
-- PharmaCare Initial Seed Data
-- Run this script after applying the initial migration
-- =====================================================

-- =====================================================
-- 1. TRANSACTION TYPES
-- =====================================================
SET IDENTITY_INSERT TransactionTypes ON;
INSERT INTO TransactionTypes (TransactionTypeID, Code, Name, Category, StockDirection, AffectsStock, CreatesVoucher, IsActive)
VALUES
    (1, 'PO', 'Purchase Order', 'PURCHASE', 0, 0, 0, 1),
    (2, 'GRN', 'Goods Received Note', 'PURCHASE', 1, 1, 1, 1),
    (3, 'PRTN', 'Purchase Return', 'PURCHASE', -1, 1, 1, 1),
    (4, 'SALE', 'Sale Invoice', 'SALE', -1, 1, 1, 1),
    (5, 'SRTN', 'Sales Return', 'SALE', 1, 1, 1, 1),
    (6, 'TFRO', 'Stock Transfer Out', 'INVENTORY', -1, 1, 0, 1),
    (7, 'TFRI', 'Stock Transfer In', 'INVENTORY', 1, 1, 0, 1),
    (8, 'SADJ+', 'Stock Adjustment (In)', 'INVENTORY', 1, 1, 1, 1),
    (9, 'SADJ-', 'Stock Adjustment (Out)', 'INVENTORY', -1, 1, 1, 1);
SET IDENTITY_INSERT TransactionTypes OFF;

-- =====================================================
-- 2. VOUCHER TYPES
-- =====================================================
SET IDENTITY_INSERT VoucherTypes ON;
INSERT INTO VoucherTypes (VoucherTypeID, Code, Name, IsAutoGenerated, IsActive)
VALUES
    (1, 'JV', 'Journal Voucher', 0, 1),
    (2, 'PV', 'Payment Voucher', 0, 1),
    (3, 'RV', 'Receipt Voucher', 0, 1),
    (4, 'CV', 'Contra Voucher', 0, 1),
    (5, 'SV', 'Sales Voucher', 1, 1),
    (6, 'PRV', 'Purchase Voucher', 1, 1),
    (7, 'EXP', 'Expense Voucher', 1, 1),
    (8, 'ADJ', 'Adjustment Voucher', 1, 1);
SET IDENTITY_INSERT VoucherTypes OFF;

-- =====================================================
-- 3. ACCOUNT TYPES
-- =====================================================
SET IDENTITY_INSERT AccountTypes ON;
INSERT INTO AccountTypes (AccountTypeID, Code, Name, Description)
VALUES
    (1, 'CASH', 'Cash Account', 'Cash on hand'),
    (2, 'BANK', 'Bank Account', 'Bank accounts'),
    (3, 'AR', 'Accounts Receivable', 'Customer balances'),
    (4, 'AP', 'Accounts Payable', 'Supplier balances'),
    (5, 'INV', 'Inventory', 'Stock value'),
    (6, 'COGS', 'Cost of Goods Sold', 'Product costs'),
    (7, 'SALE', 'Sales Revenue', 'Product sales'),
    (8, 'EXP', 'Expenses', 'Operating expenses');
SET IDENTITY_INSERT AccountTypes OFF;

-- =====================================================
-- 4. ACCOUNT HEADS (Level 1)
-- =====================================================
SET IDENTITY_INSERT AccountHeads ON;
INSERT INTO AccountHeads (AccountHeadID, Code, Name, NormalBalance, DisplayOrder, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (1, '1', 'Assets', 'DEBIT', 1, 1, 0, GETDATE(), 1),
    (2, '2', 'Liabilities', 'CREDIT', 2, 1, 0, GETDATE(), 1),
    (3, '3', 'Equity', 'CREDIT', 3, 1, 0, GETDATE(), 1),
    (4, '4', 'Revenue', 'CREDIT', 4, 1, 0, GETDATE(), 1),
    (5, '5', 'Expenses', 'DEBIT', 5, 1, 0, GETDATE(), 1);
SET IDENTITY_INSERT AccountHeads OFF;

-- =====================================================
-- 5. ACCOUNT SUBHEADS (Level 2)
-- =====================================================
SET IDENTITY_INSERT AccountSubheads ON;
INSERT INTO AccountSubheads (AccountSubheadID, AccountHead_ID, Code, Name, DisplayOrder, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (1, 1, '1-1', 'Current Assets', 1, 1, 0, GETDATE(), 1),
    (2, 1, '1-2', 'Fixed Assets', 2, 1, 0, GETDATE(), 1),
    (3, 2, '2-1', 'Current Liabilities', 1, 1, 0, GETDATE(), 1),
    (4, 3, '3-1', 'Owner''s Equity', 1, 1, 0, GETDATE(), 1),
    (5, 4, '4-1', 'Sales Revenue', 1, 1, 0, GETDATE(), 1),
    (6, 5, '5-1', 'Cost of Goods Sold', 1, 1, 0, GETDATE(), 1),
    (7, 5, '5-2', 'Operating Expenses', 2, 1, 0, GETDATE(), 1);
SET IDENTITY_INSERT AccountSubheads OFF;

-- =====================================================
-- 6. ACCOUNTS (Chart of Accounts)
-- =====================================================
SET IDENTITY_INSERT Accounts ON;
INSERT INTO Accounts (AccountID, AccountSubhead_ID, AccountType_ID, Code, Name, IsSystemAccount, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (1, 1, 1, '1-1-001', 'Cash in Hand', 1, 1, 0, GETDATE(), 1),
    (2, 1, 2, '1-1-002', 'Bank Account', 1, 1, 0, GETDATE(), 1),
    (3, 1, 3, '1-1-003', 'Accounts Receivable', 1, 1, 0, GETDATE(), 1),
    (4, 1, 5, '1-1-004', 'Inventory', 1, 1, 0, GETDATE(), 1),
    (5, 3, 4, '2-1-001', 'Accounts Payable', 1, 1, 0, GETDATE(), 1),
    (6, 5, 7, '4-1-001', 'Sales Revenue', 1, 1, 0, GETDATE(), 1),
    (7, 6, 6, '5-1-001', 'Cost of Goods Sold', 1, 1, 0, GETDATE(), 1),
    (8, 7, 8, '5-2-001', 'General Expenses', 0, 1, 0, GETDATE(), 1);
SET IDENTITY_INSERT Accounts OFF;

-- =====================================================
-- 7. DEFAULT STORE
-- =====================================================
SET IDENTITY_INSERT Stores ON;
INSERT INTO Stores (StoreID, Name, Address, Phone, Email, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (1, 'Main Branch', 'Default Location', '0000000000', NULL, 1, 0, GETDATE(), 1);
SET IDENTITY_INSERT Stores OFF;

-- =====================================================
-- 8. ROLES
-- =====================================================
SET IDENTITY_INSERT Roles ON;
INSERT INTO Roles (RoleID, Name, Description, IsSystemRole, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (1, 'Administrator', 'Full system access', 1, 1, 0, GETDATE(), 1),
    (2, 'Manager', 'Store management access', 1, 1, 0, GETDATE(), 1),
    (3, 'Cashier', 'POS and sales access', 1, 1, 0, GETDATE(), 1);
SET IDENTITY_INSERT Roles OFF;

-- =====================================================
-- 9. PAGES (Menu Structure)
-- =====================================================
SET IDENTITY_INSERT Pages ON;
-- Top-level pages
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (1, NULL, 'Dashboard', 'fas fa-home', 'Home', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (2, NULL, 'Configuration', 'fas fa-cog', NULL, NULL, 2, 1, 1, 0, GETDATE(), 1),
    (10, NULL, 'Purchases', 'fas fa-shopping-cart', NULL, NULL, 3, 1, 1, 0, GETDATE(), 1),
    (20, NULL, 'Sales', 'fas fa-cash-register', NULL, NULL, 4, 1, 1, 0, GETDATE(), 1),
    (30, NULL, 'Inventory', 'fas fa-boxes', NULL, NULL, 5, 1, 1, 0, GETDATE(), 1),
    (40, NULL, 'Finance', 'fas fa-dollar-sign', NULL, NULL, 6, 1, 1, 0, GETDATE(), 1),
    (50, NULL, 'Accounting', 'fas fa-calculator', NULL, NULL, 7, 1, 1, 0, GETDATE(), 1),
    (60, NULL, 'Reports', 'fas fa-chart-bar', NULL, NULL, 8, 1, 1, 0, GETDATE(), 1),
    (70, NULL, 'Administration', 'fas fa-user-shield', NULL, NULL, 9, 1, 1, 0, GETDATE(), 1);

-- Configuration children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (3, 2, 'Stores', 'fas fa-store', 'Store', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (4, 2, 'Categories', 'fas fa-tags', 'Category', 'Index', 2, 1, 1, 0, GETDATE(), 1),
    (5, 2, 'Products', 'fas fa-pills', 'Product', 'Index', 3, 1, 1, 0, GETDATE(), 1),
    (6, 2, 'Parties', 'fas fa-users', 'Party', 'Index', 4, 1, 1, 0, GETDATE(), 1);

-- Purchases children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (11, 10, 'Purchase Orders', 'fas fa-file-alt', 'PurchaseOrder', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (12, 10, 'Goods Received', 'fas fa-truck', 'Purchase', 'Index', 2, 1, 1, 0, GETDATE(), 1),
    (13, 10, 'Purchase Returns', 'fas fa-undo', 'PurchaseReturn', 'Index', 3, 1, 1, 0, GETDATE(), 1);

-- Sales children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (21, 20, 'Point of Sale', 'fas fa-shopping-bag', 'Pos', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (22, 20, 'Sales History', 'fas fa-history', 'Sale', 'Index', 2, 1, 1, 0, GETDATE(), 1),
    (23, 20, 'Sales Returns', 'fas fa-exchange-alt', 'SaleReturn', 'Index', 3, 1, 1, 0, GETDATE(), 1);

-- Inventory children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (31, 30, 'Stock Levels', 'fas fa-cubes', 'StoreInventory', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (32, 30, 'Stock Transfers', 'fas fa-exchange-alt', 'StockTransfer', 'Index', 2, 1, 1, 0, GETDATE(), 1),
    (33, 30, 'Stock Adjustments', 'fas fa-sliders-h', 'StockAdjustment', 'Index', 3, 1, 1, 0, GETDATE(), 1);

-- Finance children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (41, 40, 'Expense Categories', 'fas fa-folder', 'ExpenseCategory', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (42, 40, 'Expenses', 'fas fa-receipt', 'Expense', 'Index', 2, 1, 1, 0, GETDATE(), 1),
    (43, 40, 'Payments', 'fas fa-money-bill-wave', 'Payment', 'Index', 3, 1, 1, 0, GETDATE(), 1);

-- Accounting children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (51, 50, 'Chart of Accounts', 'fas fa-sitemap', 'ChartOfAccount', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (52, 50, 'Journal Entries', 'fas fa-book', 'Voucher', 'Index', 2, 1, 1, 0, GETDATE(), 1);

-- Reports children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (61, 60, 'Sales Report', 'fas fa-chart-line', 'Report', 'Sales', 1, 1, 1, 0, GETDATE(), 1),
    (62, 60, 'Purchase Report', 'fas fa-chart-pie', 'Report', 'Purchase', 2, 1, 1, 0, GETDATE(), 1),
    (63, 60, 'Inventory Report', 'fas fa-warehouse', 'Report', 'Inventory', 3, 1, 1, 0, GETDATE(), 1),
    (64, 60, 'Financial Reports', 'fas fa-file-invoice-dollar', 'Report', 'Financial', 4, 1, 1, 0, GETDATE(), 1);

-- Administration children
INSERT INTO Pages (PageID, Parent_ID, Title, Icon, Controller, [Action], DisplayOrder, IsVisible, IsActive, IsDeleted, CreatedAt, CreatedBy)
VALUES
    (71, 70, 'Users', 'fas fa-user', 'User', 'Index', 1, 1, 1, 0, GETDATE(), 1),
    (72, 70, 'Roles', 'fas fa-user-tag', 'Role', 'Index', 2, 1, 1, 0, GETDATE(), 1);
SET IDENTITY_INSERT Pages OFF;

-- =====================================================
-- 10. ROLE-PAGE PERMISSIONS (Administrator gets all)
-- =====================================================
-- Create permissions for Administrator role (RoleID = 1) on all pages
INSERT INTO RolePages (Role_ID, Page_ID, CanView, CanCreate, CanEdit, CanDelete)
SELECT 1, PageID, 1, 1, 1, 1
FROM Pages;

-- Manager role (RoleID = 2) - most pages except administration
INSERT INTO RolePages (Role_ID, Page_ID, CanView, CanCreate, CanEdit, CanDelete)
SELECT 2, PageID, 1, 1, 1, 0
FROM Pages
WHERE PageID NOT IN (70, 71, 72);

-- Cashier role (RoleID = 3) - POS and sales only
INSERT INTO RolePages (Role_ID, Page_ID, CanView, CanCreate, CanEdit, CanDelete)
SELECT 3, PageID, 1, 1, 0, 0
FROM Pages
WHERE PageID IN (1, 20, 21, 22);

-- =====================================================
-- 11. DEFAULT ADMIN USER
-- Password: Admin@123 (needs to be hashed using ASP.NET Identity)
-- Run this AFTER creating the user through the application
-- or use the Identity UserManager to create the user
-- =====================================================
-- Note: The admin user should be created through the application
-- using ASP.NET Identity's UserManager to properly hash the password.
-- After creating the user, run:
-- INSERT INTO UserRoles (User_ID, Role_ID) VALUES (<AdminUserID>, 1);

PRINT 'Seed data inserted successfully!';
PRINT 'NOTE: Create admin user through the application, then assign Administrator role.';
