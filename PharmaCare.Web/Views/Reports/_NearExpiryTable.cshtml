@model List<PharmaCare.Application.DTOs.Reports.NearExpiryItemDto>

@if (Model.Any())
{
    <div class="card">
        <div class="card-body">
            <table class="table table-sm">
                <thead class="table-dark">
                    <tr>
                        <th>Product</th>
                        <th>Batch</th>
                        <th>Expires On</th>
                        <th>Days Left</th>
                        <th>Qty</th>
                        <th class="text-end">At-Risk Value</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Take(25))
                    {
                        <tr>
                            <td><strong>@item.ProductName</strong></td>
                            <td>@item.BatchNumber</td>
                            <td>@item.ExpiryDate.ToString("MMM dd, yyyy")</td>
                            <td>
                                <span
                                    class="badge bg-@(item.DaysUntilExpiry <= 7 ? "danger" : item.DaysUntilExpiry <= 30 ? "warning" : "info")">
                                    @item.DaysUntilExpiry days
                                </span>
                            </td>
                            <td>@item.Quantity</td>
                            <td class="text-end text-warning fw-bold">Rs. @item.TotalValue.ToString("N0")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}
else
{
    <div class="text-center py-5 text-muted">
        <i class='bx bx-check-circle display-4'></i>
        <p class="mt-2">No items expiring in this period</p>
    </div>
}
