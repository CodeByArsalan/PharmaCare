@model PharmaCare.Web.ViewModels.Report.DayClosingViewModel

@{
    ViewData["Title"] = "End of Day Report";
}

<div class="page-header">
    <h4 class="page-title">
        <i class="fas fa-cash-register me-2"></i>End of Day Report
    </h4>
    <form asp-action="Index" method="get" class="d-flex align-items-center">
        <input type="date" name="date" class="form-control me-2" value="@Model.Date.ToString("yyyy-MM-dd")" onchange="this.form.submit()" />
        <button type="submit" class="btn btn-primary"><i class="fas fa-filter"></i></button>
    </form>
</div>

<div class="row g-4">
    <!-- Sales Summary -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0"><i class="fas fa-shopping-cart me-2"></i>Sales Summary</h6>
            </div>
            <div class="card-body">
                <div class="d-flex justify-content-between mb-2">
                    <span>Total Sales:</span>
                    <strong>@Model.TotalSales.ToString("N2")</strong>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Invoices:</span>
                    <strong>@Model.SalesCount</strong>
                </div>
                <hr />
                <div class="d-flex justify-content-between mb-2">
                    <span>Cash Sales:</span>
                    <strong class="text-success">@Model.CashSales.ToString("N2")</strong>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Credit Sales:</span>
                    <strong class="text-warning">@Model.CreditSales.ToString("N2")</strong>
                </div>
                <hr/>
                <div class="d-flex justify-content-between mb-2 text-danger">
                    <span>Returns:</span>
                    <strong>(@Model.TotalReturns.ToString("N2"))</strong>
                </div>
                <div class="d-flex justify-content-between">
                    <span>Net Sales:</span>
                    <strong class="text-primary">@Model.NetSales.ToString("N2")</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Cash Flow -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header bg-success text-white">
                <h6 class="mb-0"><i class="fas fa-wallet me-2"></i>Cash Flow (Vouchers)</h6>
            </div>
            <div class="card-body">
                <div class="d-flex justify-content-between mb-3">
                    <span>Total Cash In:</span>
                    <strong class="text-success fs-5">@Model.TotalCashReceived.ToString("N2")</strong>
                </div>
                <p class="small text-muted mb-3">Includes Cash Sales + Customer Payments</p>
                <hr />
                <div class="d-flex justify-content-between mb-3">
                    <span>Total Cash Out:</span>
                    <strong class="text-danger fs-5">(@Model.TotalExpenses.ToString("N2"))</strong>
                </div>
                <p class="small text-muted mb-3">Includes Expenses + Supplier Payments</p>
                <hr />
                <div class="d-flex justify-content-between bg-light p-2 rounded">
                    <span class="fw-bold">Net Cash Today:</span>
                    <strong class="text-primary fs-4">@Model.CashInHand.ToString("N2")</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Actions -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-header bg-secondary text-white">
                <h6 class="mb-0"><i class="fas fa-tools me-2"></i>Actions</h6>
            </div>
            <div class="card-body d-flex flex-column justify-content-center align-items-center">
                
                <button class="btn btn-outline-primary mb-3 w-100" onclick="window.print()">
                    <i class="fas fa-print me-2"></i>Print Report
                </button>
                
                <button class="btn btn-danger w-100 disabled" title="Coming Soon: Z-Report logic to lock day">
                    <i class="fas fa-lock me-2"></i>Close Register (Z-Report)
                </button>
                <p class="text-muted small mt-2 text-center">Closing the register will lock transactions for this date.</p>
            </div>
        </div>
    </div>
</div>

<style media="print">
    .page-header, .btn, form { display: none !important; }
    .card { border: 1px solid #000 !important; }
    .card-header { background: #eee !important; color: #000 !important; border-bottom: 1px solid #000 !important; }
    .text-success, .text-warning, .text-danger, .text-primary { color: #000 !important; }
</style>
